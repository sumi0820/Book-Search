{"ast":null,"code":"import _classCallCheck from\"/Users/sumi/smy_website/project/Book-Search/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sumi/smy_website/project/Book-Search/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/sumi/smy_website/project/Book-Search/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/sumi/smy_website/project/Book-Search/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/sumi/smy_website/project/Book-Search/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import SearchArea from'./SearchArea';import request from'superagent';import BookList from'./BookList';var Books=/*#__PURE__*/function(_Component){_inherits(Books,_Component);//Create state\nfunction Books(props){var _this;_classCallCheck(this,Books);_this=_possibleConstructorReturn(this,_getPrototypeOf(Books).call(this,props));_this.searchBooks=function(e){e.preventDefault();request.get(\"https://www.googleapis.com/books/v1/volumes/\").query({q:_this.state.searchField}).query('&maxResults=40').then(function(data){console.log(data);var cleanData=_this.cleanData(data);_this.setState({books:cleanData});});};_this.handleSearch=function(e){_this.setState({searchField:e.target.value});};_this.handleSort=function(e){_this.setState({sort:e.target.value});};_this.cleanData=function(data){var cleanData=data.body.items.map(function(book){if(book.volumeInfo.hasOwnProperty('publishedDate')===false){book.volumeInfo['publishedDate']='0000';}else if(book.volumeInfo.hasOwnProperty('imageLinks')===false){book.volumeInfo['imageLinks']={thumbnail:'https://icon-library.net/images/no-photo-icon/no-photo-icon-5.jpg'};}return book;});return cleanData;};_this.state={books:[],searchField:'',sort:''};return _this;}//Fetch data from API\n_createClass(Books,[{key:\"render\",//Pass \"handleSearch\" to <SearchArea> component\nvalue:function render(){var _this2=this;var sortedBooks=this.state.books.sort(function(a,b){if(_this2.state.sort==='Newest'){return parseInt(b.volumeInfo.publishedDate.substring(0,4))-parseInt(a.volumeInfo.publishedDate.substring(0,4));}else if(_this2.state.sort==='Oldest'){return parseInt(a.volumeInfo.publishedDate.substring(0,4))-parseInt(b.volumeInfo.publishedDate.substring(0,4));}});return React.createElement(\"div\",null,React.createElement(SearchArea,{searchBooks:this.searchBooks,handleSearch:this.handleSearch,handleSort:this.handleSort}),React.createElement(BookList,{books:sortedBooks}));}}]);return Books;}(Component);export default Books;","map":{"version":3,"sources":["/Users/sumi/smy_website/project/Book-Search/src/Books.js"],"names":["React","Component","SearchArea","request","BookList","Books","props","searchBooks","e","preventDefault","get","query","q","state","searchField","then","data","console","log","cleanData","setState","books","handleSearch","target","value","handleSort","sort","body","items","map","book","volumeInfo","hasOwnProperty","thumbnail","sortedBooks","a","b","parseInt","publishedDate","substring"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport SearchArea from './SearchArea';\nimport request from 'superagent';\nimport BookList from './BookList';\n\n\nclass Books extends Component {\n\n    //Create state\n    constructor(props){\n        super(props);\n        this.state = {\n            books: [],\n            searchField: '',\n            sort: ''\n        }\n    }\n\n    //Fetch data from API\n    searchBooks = (e) => {\n        e.preventDefault();\n        request\n            .get(\"https://www.googleapis.com/books/v1/volumes/\")\n            .query({ q: this.state.searchField })\n            .query('&maxResults=40')\n            .then((data) => {\n                console.log(data);\n                const cleanData = this.cleanData(data);\n                this.setState({ books: cleanData });\n            })            \n    }\n\n\n    //Create search handler\n    handleSearch = (e) => {\n        this.setState({ searchField: e.target.value })\n    }\n\n    //Sort out handler\n    handleSort = (e) => {\n        this.setState({ sort: e.target.value })\n    }\n\n    //Clean up data\n    cleanData = (data) => {\n        const cleanData = data.body.items.map((book) => {\n            if(book.volumeInfo.hasOwnProperty('publishedDate') === false){\n                book.volumeInfo['publishedDate'] = '0000';\n            }\n            else if(book.volumeInfo.hasOwnProperty('imageLinks') === false){\n                book.volumeInfo['imageLinks'] = { thumbnail: 'https://icon-library.net/images/no-photo-icon/no-photo-icon-5.jpg'}\n            }\n        return book;\n        })\n    return cleanData;   \n    }\n\n\n    //Pass \"handleSearch\" to <SearchArea> component\n\trender() {  \n        const sortedBooks = this.state.books.sort((a, b) => {\n            if(this.state.sort === 'Newest') {\n                    return parseInt(b.volumeInfo.publishedDate.substring(0,4)) - parseInt(a.volumeInfo.publishedDate.substring(0,4))\n            }\n            else if(this.state.sort === 'Oldest'){\n                    return parseInt(a.volumeInfo.publishedDate.substring(0,4)) - parseInt(b.volumeInfo.publishedDate.substring(0,4))\n            }\n        })\n\n\t\treturn (\n\t\t    <div >\n                <SearchArea searchBooks={this.searchBooks} handleSearch={this.handleSearch} handleSort={this.handleSort}/>\n                <BookList books={sortedBooks} />\n\n\t\t    </div>\n\t\t  );\n\t\t}\n\t}\n\nexport default Books;\n"]},"metadata":{},"sourceType":"module"}